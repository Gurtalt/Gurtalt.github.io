<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        
        <link rel="stylesheet" href="styles.css">
        <link rel="manifest" href="manifest.json">
        <link rel="icon" type="image/x-icon" href="media/favicon.png">
        <title>JCode</title>
        
    </head>
    <body>
        <span id="infoBar">JCode; Build 0.7.3; 25/02/2026;</span>
        <header id="buttonBar">
            <button onclick="New();">CLEAR</button>
            <button onclick="OpenMenu({type: 'fileSelectorMenu', action: 'load'});">LOAD</button>
            <button onclick="OpenMenu({type: 'fileSelectorMenu', action: 'save'});">SAVE</button>
            <button onclick="OpenMenu({type: 'fileSelectorMenu', action: 'export'});">EXPORT</button>
        </header>

        

        <textarea id="editor"></textarea>

        <div class="arrowButtonContainer" id="arrowBar">
        <button class="arrowButton" id="pageNumber">1</button>
        <button class="arrowButton" onclick="MovePage('previous');">&#8592;</button>
        <button class="arrowButton" onclick="MovePage('next');">&#8594;</button>
        <button class="arrowButton" id="newPage" onclick="CreateNewPage();">+</button>
        </div>

        <div id='customKeyBar'>

            <button class='customKey' onclick='SpawnKey(this.dataset.leftBracket,this.dataset.rightBracket)' data-left-bracket="(" data-right-bracket=")">
            ( ) 
            </button>
            <button class='customKey' onclick='SpawnKey(this.dataset.leftBracket,this.dataset.rightBracket)' data-left-bracket="'" data-right-bracket="'">
            ' ' 
            </button>
            <button class='customKey' onclick='SpawnKey(this.dataset.leftBracket,this.dataset.rightBracket)' data-left-bracket="{" data-right-bracket="}">
            { } 
            </button>
            <button class='customKey' onclick='SpawnKey(this.dataset.leftBracket,this.dataset.rightBracket)' data-left-bracket="[" data-right-bracket="]">
            [ ] 
            </button>

        </div>

        <div id="menu">
            <div id="fileSelectorMenu" class="menuContent">
            
                <select name="selector" id="selector">
                    
                </select>

                <input type="text" id="selectorInput" placeholder="File Name...">
                
                <button onclick="Load();" id="selectorButton">LOAD:</button>
                
                <button onclick="CloseMenu();" id="closeButton">X</button>
    
            </div>

        
        
            <div id="settingsMenu" class="menuContent">

            <label for="editKeysToggle">Edit Keys:</label>
            <input type="checkbox" id="editKeysToggle" onchange="ToggleEditKeys();">
            <br>
            <br>
            <label for="additionalKeysToggle">Additional Keys:</label>
            <input type="checkbox" id="additionalKeysToggle" onchange="ToggleAdditionalKeys();">
            <br>
            <br>
            <label for="keySoundToggle">Key Sound:</label>
            <input type="checkbox" id="keySoundToggle" onchange="ToggleKeySound();">
            <br>
            <header id="buttonBar">
                <button onclick="New();">CLEAR</button>
                <button onclick="OpenMenu({type: 'fileSelectorMenu', action: 'load'});">LOAD</button>
                <button onclick="OpenMenu({type: 'fileSelectorMenu', action: 'save'});">SAVE</button>
                <button onclick="OpenMenu({type: 'fileSelectorMenu', action: 'export'});">EXPORT</button>
            </header>

            <br>
            
            <div class="arrowButtonContainer">
            <button class="arrowButton" id="pageNumberMenu">1</button>
            <button class="arrowButton" onclick="MovePage('previous');">&#8592;</button>
            <button class="arrowButton" onclick="MovePage('next');">&#8594;</button>
            <button class="arrowButton" id="newPageMenu" onclick="CreateNewPage();">+</button>
            </div>
            <button onclick="CloseMenu();" id="closeButton">X</button>

            </div>
        </div>

        <button onclick="OpenMenu({type: 'settingsMenu', action: 'openSettings'});" id="settingsButton">
            
        </button>
        <script src="app.js"></script>
        <script>
            if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js', { updateViaCache: 'none' })
                .catch(err => console.error('SW registration failed', err));

           
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                window.location.reload();
            });
            }
</script>
    </body>
</html>